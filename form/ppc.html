<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>PPC Evaluation</title>
    <link
      rel="stylesheet"
      href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css"
    />
    <link rel="stylesheet" href="../css/styles.css" />
    <style>
      body {
        font-family: Arial, sans-serif;
        background-color: #facbf1;
      }

      #result {
        margin-top: 20px;
        padding: 10px;
        background-color: #f2f2f2;
        border: 1px solid #ccc;
        border-radius: 5px;
      }
    </style>
  </head>
  <body>
    <nav>
      <ul>
        <li><a href="../form/diabetes.html">Diabetes Follow Up</a></li>
        <li><a href="../form/asthmaFollowUp.html">Asthma Follow Up</a></li>
        <li><a href="../form/hypertension.html">HTN Follow Up</a></li>
        <li><a href="../form/ams.html">AMS</a></li>
        <li><a href="../form/pain.html">Pain Clinic</a></li>
        <li><a href="../form/ppc.html">Pre Pregnancy Care</a></li>
      </ul>
    </nav>

    <div class="container">
      <h1>Pre Pregnancy Care Assessment</h1>
      <form id="clerking-form">
        <h3>O&G History</h3>
        <div class="form-group">
          <label for="menarche">Menarche:</label>
          <input
            type="text"
            class="form-control"
            id="menarche"
            name="menarche"
          />
        </div>

        <div class="form-group">
          <label for="cycle">Mentrual Cycle:</label>
          <input type="text" class="form-control" id="cycle" name="cycle" />
        </div>
        <div class="form-group">
          <label for="para">Para:</label>
          <input type="text" class="form-control" id="para" name="para" />
        </div>
        <div class="form-group">
          <label for="lcb">LCB:</label>
          <input type="text" class="form-control" id="lcb" name="lcb" />
        </div>
        <div class="form-group">
          <label for="immunization">Immunisation:</label>
          <textarea class="form-control" id="immunization" name="immunization">
          </textarea>
        </div>

        <!-- <h3>Masalah Perubatan</h3>
        <div class="form-check">
          <input
            class="form-check-input"
            type="checkbox"
            value="DM"
            id="dm"
            name="medicalIssues"
          />
          <label class="form-check-label" for="dm">DM</label>
        </div>
        <div class="form-check">
          <input
            class="form-check-input"
            type="checkbox"
            value="HPT"
            id="hpt"
            name="medicalIssues"
          />
          <label class="form-check-label" for="hpt">HPT</label>
        </div>
        <div class="form-check">
          <input
            class="form-check-input"
            type="checkbox"
            value="Asthma"
            id="asthma"
            name="medicalIssues"
          />
          <label class="form-check-label" for="asthma">Asthma</label>
        </div>
        <div class="form-check">
          <input
            class="form-check-input"
            type="checkbox"
            value="CVD"
            id="cvd"
            name="medicalIssues"
          />
          <label class="form-check-label" for="cvd">CVD</label>
        </div>
        <div class="form-check">
          <input
            class="form-check-input"
            type="checkbox"
            value="Mental"
            id="mental"
            name="medicalIssues"
          />
          <label class="form-check-label" for="mental">Mental</label>
        </div>
        <div class="form-check">
          <input
            class="form-check-input"
            type="checkbox"
            value="Others"
            id="others"
            name="medicalIssues"
          />
          <label class="form-check-label" for="others">Lain-lain</label>
        </div> -->
        <!-- <h3>Ubat-ubatan</h3>
        <div class="form-group">
          <label for="medications">1.</label>
          <input
            type="text"
            class="form-control"
            id="medications1"
            name="medications[]"
          />
        </div>
        <div class="form-group">
          <label for="medications">2.</label>
          <input
            type="text"
            class="form-control"
            id="medications2"
            name="medications[]"
          />
        </div>
        <div class="form-group">
          <label for="medications">3.</label>
          <input
            type="text"
            class="form-control"
            id="medications3"
            name="medications[]"
          />
        </div>
        <div class="form-group">
          <label for="medications">4.</label>
          <input
            type="text"
            class="form-control"
            id="medications4"
            name="medications[]"
          />
        </div>
        <div class="form-group">
          <label for="medications">5.</label>
          <input
            type="text"
            class="form-control"
            id="medications5"
            name="medications[]"
          />
        </div> -->
        <h3>Psychosocial Risk</h3>
        <div class="form-check">
          <input
            class="form-check-input"
            type="checkbox"
            value="Smoking"
            id="smoking"
            name="psychosocialRisks"
          />
          <label class="form-check-label" for="smoking">Smoking</label>
        </div>
        <div class="form-check">
          <input
            class="form-check-input"
            type="checkbox"
            value="Alcohol"
            id="alcohol"
            name="psychosocialRisks"
          />
          <label class="form-check-label" for="alcohol">Alcohol</label>
        </div>
        <div class="form-check">
          <input
            class="form-check-input"
            type="checkbox"
            value="Obesity"
            id="obesity"
            name="psychosocialRisks"
          />
          <label class="form-check-label" for="obesity">Obesity</label>
        </div>
        <div class="form-check">
          <input
            class="form-check-input"
            type="checkbox"
            value="Drug/Illicit substance"
            id="drugs"
            name="psychosocialRisks"
          />
          <label class="form-check-label" for="drugs"
            >Drug/Illicit substance</label
          >
        </div>
        <div class="form-check">
          <input
            class="form-check-input"
            type="checkbox"
            value="Sexual"
            id="sexual"
            name="psychosocialRisks"
          />
          <label class="form-check-label" for="sexual">Sexual</label>
        </div>
        <div class="form-check">
          <input
            class="form-check-input"
            type="checkbox"
            value="Socioeconomic"
            id="socioeconomic"
            name="socioeconomic"
          />
          <label class="form-check-label" for="socioeconomic"
            >Socioeconomic</label
          >
        </div>
        <h3>Family Planning</h3>
        <div class="form-check">
          <input
            class="form-check-input"
            type="checkbox"
            value="OCP"
            id="ocp"
            name="familyPlanning"
          />
          <label class="form-check-label" for="ocp">OCP</label>
        </div>
        <div class="form-check">
          <input
            class="form-check-input"
            type="checkbox"
            value="Injectable"
            id="injection"
            name="familyPlanning"
          />
          <label class="form-check-label" for="injection">Injectable</label>
        </div>
        <div class="form-check">
          <input
            class="form-check-input"
            type="checkbox"
            value="IUCD"
            id="iucd"
            name="familyPlanning"
          />
          <label class="form-check-label" for="iucd">IUCD</label>
        </div>
        <div class="form-check">
          <input
            class="form-check-input"
            type="checkbox"
            value="Implant"
            id="implant"
            name="familyPlanning"
          />
          <label class="form-check-label" for="implant">Implant</label>
        </div>
        <div class="form-check">
          <input
            class="form-check-input"
            type="checkbox"
            value="Condom"
            id="condom"
            name="familyPlanning"
          />
          <label class="form-check-label" for="condom">Condom</label>
        </div>
        <div class="form-check">
          <input
            class="form-check-input"
            type="checkbox"
            value="Traditional"
            id="traditional"
            name="familyPlanning"
          />
          <label class="form-check-label" for="traditional">Traditional</label>
        </div>
        <div class="form-check">
          <input
            class="form-check-input"
            type="checkbox"
            value="Nil"
            id="nil"
            name="familyPlanning"
          />
          <label class="form-check-label" for="nil">Nil</label>
        </div>

        <h3>Desire for Future Pregnancy</h3>
        <div class="btn-group" data-toggle="buttons">
          <label class="btn btn-secondary">
            <input type="radio" name="desirePregnancy" value="Yes" />
            Yes
          </label>
          <label class="btn btn-secondary">
            <input type="radio" name="desirePregnancy" id="1" value="No" />
            No
          </label>
        </div>

        <h3>Suitability for Future Pregnancy</h3>
        <div class="btn-group" data-toggle="buttons">
          <label class="btn btn-secondary">
            <input type="radio" name="suitabilityPregnancy" value="Yes" />
            Yes
          </label>
          <label class="btn btn-secondary">
            <input type="radio" name="suitabilityPregnancy" id="2" value="No" />
            No
          </label>
        </div>

        <h3>PPC Advices</h3>
        <div class="form-group">
          <label>Healthy Lifestyle Advice:</label>
          <div class="form-check">
            <input
              class="form-check-input"
              type="checkbox"
              value="Ideal weight management"
              id="weightManagement"
              name="lifestyleAdvice"
            />
            <label class="form-check-label" for="weightManagement"
              >Ideal weight management
              <div class="info-container">
                <img
                  src="../image/question.png"
                  alt="Question Mark Icon"
                  width="18"
                  height="18"
                />
                <div class="info-card">
                  <img
                    style="width: 100%"
                    src="../image/weight.png"
                    alt="weight"
                  />
                </div></div
            ></label>
          </div>
          <div class="form-check">
            <input
              class="form-check-input"
              type="checkbox"
              value="Healthy and balanced diet"
              id="healthyDiet"
              name="lifestyleAdvice"
            />
            <label class="form-check-label" for="healthyDiet"
              >Healthy and balanced diet
              <div class="info-container">
                <img
                  src="../image/question.png"
                  alt="Question Mark Icon"
                  width="18"
                  height="18"
                />
                <div class="info-card">
                  <img
                    style="width: 120%"
                    src="../image/heathyDiet.jpg"
                    alt="heathyDiet"
                  />
                </div></div
            ></label>
          </div>
          <div class="form-check">
            <input
              class="form-check-input"
              type="checkbox"
              value="Stress management"
              id="stressManagement"
              name="lifestyleAdvice"
            />
            <label class="form-check-label" for="stressManagement"
              >Stress management
              <div class="info-container">
                <img
                  src="../image/question.png"
                  alt="Question Mark Icon"
                  width="18"
                  height="18"
                />
                <div class="info-card">
                  <img
                    style="width: 120%"
                    src="../image/stress.jpg"
                    alt="stress"
                  />
                </div></div
            ></label>
          </div>
          <div class="form-check">
            <input
              class="form-check-input"
              type="checkbox"
              value="Exercise"
              id="exercise"
              name="lifestyleAdvice"
            />
            <label class="form-check-label" for="exercise"
              >Exercise
              <div class="info-container">
                <img
                  src="../image/question.png"
                  alt="Question Mark Icon"
                  width="18"
                  height="18"
                />
                <div class="info-card">
                  <img
                    style="width: 120%"
                    src="../image/exercise.jpg"
                    alt="exercise"
                  />
                </div></div
            ></label>
          </div>
          <div class="form-check">
            <input
              class="form-check-input"
              type="checkbox"
              value="Others (e.g., avoid risky behaviors, smoking habits, drug/substance abuse, and alcohol)"
              id="other"
              name="lifestyleAdvice"
            />
            <label class="form-check-label" for="other"
              >Others (e.g., avoid risky behaviors, smoking
              habits,drug/substance abuse, and alcohol)</label
            >
          </div>
        </div>
        <div class="form-check">
          <input
            class="form-check-input"
            type="checkbox"
            name="lifestyleAdvice"
            value="Advice/counselling on family planning"
            id="familyPlanningYes"
          />
          <label class="form-check-label" for="familyPlanningYes"
            >Advice/counselling on family planning
            <div class="info-container">
              <img
                src="../image/question.png"
                alt="Question Mark Icon"
                width="18"
                height="18"
              />
              <div class="info-card">
                <img
                  style="width: 120%"
                  src="../image/birthControl.jpg"
                  alt="birthControl"
                />
              </div></div
          ></label>
        </div>
        <div class="form-check">
          <input
            class="form-check-input"
            type="checkbox"
            name="lifestyleAdvice"
            value="Advice on chronic disease control"
            id="chronicDiseaseAdvice"
          />
          <label class="form-check-label"
            >Advice on chronic disease control</label
          >
        </div>
        <div class="form-check">
          <input
            class="form-check-input"
            type="checkbox"
            name="lifestyleAdvice"
            value="Folic acid supplementation"
            id="folicAcid"
          />
          <label class="form-check-label">Folic acid supplementation</label>
        </div>
        <br />
        <label for="additionalMx">Additional Management:</label>
        <textarea id="additionalMx" name="additionalMx"></textarea>
        <table style="width: 100%">
          <tr>
            <td>
              <button type="submit" onclick="makeSummary()">Generate</button>
            </td>
            <td>
              <div onclick="setAllDone();">
                <img
                  src="../image/cheat.png"
                  id="cheat../image"
                  alt="cheat"
                  style="width: 35px; height: 35px; margin-right: 10px"
                />
              </div>
            </td>
          </tr>
        </table>
      </form>
    </div>
    <div class="card">
      <div class="container">
        <button type="submit" onclick="copyToClipboard()">Copy to TPC</button>
        <div id="summary"></div>
      </div>
    </div>

    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"></script>
    <script>
      function makeSummary() {
        // Get the form and summary elements
        const form = document.getElementById("clerking-form");
        const summary = document.getElementById("summary");

        // Add event listener to form submit button
        form.addEventListener("submit", (e) => {
          // Prevent form submission
          e.preventDefault();

          // Get form data
          const formData = new FormData(form);

          // Create an empty object to store the form data
          const formDataObj = {};

          // Loop through the form data and add each key-value pair to the formDataObj
          for (const [key, value] of formData.entries()) {
            formDataObj[key] = value;
          }
          let smoke;
          let alcohol;
          let obesity;
          let drugs;
          let sexual;
          let socioEconomy;
          document.querySelector('input[value="Smoking"]').checked
            ? (smoke = "Yes")
            : (smoke = "No");
          document.querySelector('input[value="Alcohol"]').checked
            ? (alcohol = "Yes")
            : (alcohol = "No");
          document.querySelector('input[value="Obesity"]').checked
            ? (obesity = "Yes")
            : (obesity = "No");
          document.querySelector('input[value="Drug/Illicit substance"]')
            .checked
            ? (drugs = "Yes")
            : (drugs = "No");
          document.querySelector('input[value="Sexual"]').checked
            ? (sexual = "Yes")
            : (sexual = "No");
          document.querySelector('input[value="Socioeconomic"]').checked
            ? (socioEconomy = "Yes")
            : (socioEconomy = "No");

          // Create a option of contraception
          const checkedContraceptions = document.querySelectorAll(
            'input[name="familyPlanning"]:checked'
          );
          const method = [];
          checkedContraceptions.forEach((checkbox) => {
            method.push(checkbox.value);
          });
          // Create a option of lifestyleAdvice
          const checkedAdvices = document.querySelectorAll(
            'input[name="lifestyleAdvice"]:checked'
          );
          const advices = [];
          checkedAdvices.forEach((checkbox) => {
            advices.push(checkbox.value);
          });
          // Create a summary of the form data
          const summaryHTML = `
      			<h2>Summary</h2>
            <strong>Sejarah O&G:</strong>
            <strong>Menarche:</strong> ${formDataObj.menarche}
            <strong>Menstrual Cycle:</strong> ${formDataObj.cycle}
            <strong>Para:</strong> ${formDataObj.para}
            <strong>LCB:</strong> ${formDataObj.lcb}
            <strong>Immunisation:</strong> ${formDataObj.immunization}

            <strong>Psychosocial Risk:</strong>
            <strong>Smoking:</strong> ${smoke}
            <strong>Alcohol:</strong> ${alcohol}
            <strong>Obesity:</strong> ${obesity}
            <strong>Drug/ Illicit substance:</strong> ${drugs}
            <strong>Sexual:</strong> ${sexual}
            <strong>SocioEconomy:</strong> ${socioEconomy}

            <strong>Family Planning Method:</strong>
            ${method.join(", ")}

            <strong>Desire for future pregnancy</strong> ${
              formDataObj.desirePregnancy
            }

            <strong>Suitability for future pregnancy:</strong> ${
              formDataObj.suitabilityPregnancy
            }

            <strong>PPC Management:</strong>
            ${advices.join("<br>")}
            ${formDataObj.additionalMx}`;
          // Set the summary HTML
          summary.innerHTML = summaryHTML.replace(/\n/g, "<br>");
        });
      }

      /* Set all radio button to DONE */
      function setAllDone() {
        document.getElementById("nil").checked = true;
        document.getElementById("1").checked = true;
        document.getElementById("2").checked = true;
        document.getElementById("weightManagement").checked = true;
        document.getElementById("healthyDiet").checked = true;
        document.getElementById("stressManagement").checked = true;
        document.getElementById("exercise").checked = true;
        document.getElementById("other").checked = true;
        document.getElementById("familyPlanningYes").checked = true;
        document.getElementById("chronicDiseaseAdvice").checked = true;
        document.getElementById("folicAcid").checked = true;
      }

      /* Close the dropdown if the user clicks outside of it */
      window.onclick = function (event) {
        if (!event.target.matches(".dropbtn")) {
          var dropdowns = document.getElementsByClassName("dropdown-content");
          for (var i = 0; i < dropdowns.length; i++) {
            var openDropdown = dropdowns[i];
            if (openDropdown.classList.contains("show")) {
              openDropdown.classList.remove("show");
            }
          }
        }
      };

      function copyToClipboard() {
        const summaryPanel = document.getElementById("summary");
        const summaryText = summaryPanel.innerText;
        // Create a temporary textarea element to copy the text to the clipboard
        const tempTextArea = document.createElement("textarea");
        tempTextArea.value = summaryText;
        document.body.appendChild(tempTextArea);
        // Select and copy the text to the clipboard
        tempTextArea.select();
        document.execCommand("copy");
        // Remove the temporary textarea element
        document.body.removeChild(tempTextArea);
        // Provide feedback to the user (optional)
        alert("Summary copied!");
      }
    </script>
  </body>
</html>
